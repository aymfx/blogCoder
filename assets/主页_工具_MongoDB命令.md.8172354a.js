import{_ as s,c as a,o as n,a as l}from"./app.2315f2eb.js";const u=JSON.parse('{"title":"MongoDB\u547D\u4EE4","description":"","frontmatter":{"title":"MongoDB\u547D\u4EE4"},"headers":[{"level":2,"title":"\u5207\u6362\u548C\u521B\u5EFA\u6570\u636E\u5E93","slug":"\u5207\u6362\u548C\u521B\u5EFA\u6570\u636E\u5E93"},{"level":2,"title":"\u67E5\u770B\u6570\u636E\u5E93","slug":"\u67E5\u770B\u6570\u636E\u5E93"},{"level":2,"title":"\u663E\u793A\u5F53\u524D\u7684\u6570\u636E\u96C6\u5408","slug":"\u663E\u793A\u5F53\u524D\u7684\u6570\u636E\u96C6\u5408"},{"level":2,"title":"\u5220\u9664\u96C6\u5408\uFF0C\u5220\u9664\u6307\u5B9A\u7684\u96C6\u5408 \u5220\u9664\u8868","slug":"\u5220\u9664\u96C6\u5408\uFF0C\u5220\u9664\u6307\u5B9A\u7684\u96C6\u5408-\u5220\u9664\u8868"},{"level":2,"title":"\u5220\u9664\u5E93","slug":"\u5220\u9664\u5E93"},{"level":2,"title":"\u65B0\u589E\u4E00\u6761\u8BB0\u5F55","slug":"\u65B0\u589E\u4E00\u6761\u8BB0\u5F55"},{"level":2,"title":"\u67E5\u8BE2\u6240\u6709\u8BB0\u5F55","slug":"\u67E5\u8BE2\u6240\u6709\u8BB0\u5F55"},{"level":2,"title":"\u67E5\u8BE2\u53BB\u6389\u540E\u7684\u5F53\u524D\u805A\u96C6\u96C6\u5408\u4E2D\u7684\u67D0\u5217\u7684\u91CD\u590D\u6570\u636E   \u4F1A\u8FC7\u6EE4\u6389 name \u4E2D\u7684\u76F8\u540C\u6570\u636E","slug":"\u67E5\u8BE2\u53BB\u6389\u540E\u7684\u5F53\u524D\u805A\u96C6\u96C6\u5408\u4E2D\u7684\u67D0\u5217\u7684\u91CD\u590D\u6570\u636E-\u4F1A\u8FC7\u6EE4\u6389-name-\u4E2D\u7684\u76F8\u540C\u6570\u636E"},{"level":2,"title":"\u67E5\u8BE2 age = 22 \u7684\u8BB0\u5F55","slug":"\u67E5\u8BE2-age-22-\u7684\u8BB0\u5F55"},{"level":2,"title":"\u67E5\u8BE2 age > 22 \u7684\u8BB0\u5F55","slug":"\u67E5\u8BE2-age-22-\u7684\u8BB0\u5F55-1"},{"level":2,"title":"\u67E5\u8BE2 age < 22 \u7684\u8BB0\u5F55","slug":"\u67E5\u8BE2-age-22-\u7684\u8BB0\u5F55-2"},{"level":2,"title":"\u67E5\u8BE2 age >= 25 \u7684\u8BB0\u5F55","slug":"\u67E5\u8BE2-age-25-\u7684\u8BB0\u5F55"},{"level":2,"title":"\u67E5\u8BE2 age <= 25 \u7684\u8BB0\u5F55","slug":"\u67E5\u8BE2-age-25-\u7684\u8BB0\u5F55-1"},{"level":2,"title":"\u67E5\u8BE2 age >= 23 \u5E76\u4E14 age <= 26  \u6CE8\u610F\u4E66\u5199\u683C\u5F0F","slug":"\u67E5\u8BE2-age-23-\u5E76\u4E14-age-26-\u6CE8\u610F\u4E66\u5199\u683C\u5F0F"},{"level":2,"title":"\u67E5\u8BE2 name \u4E2D\u5305\u542B mongo \u7684\u6570\u636E  \u6A21\u7CCA\u67E5\u8BE2\u7528\u4E8E\u641C\u7D22","slug":"\u67E5\u8BE2-name-\u4E2D\u5305\u542B-mongo-\u7684\u6570\u636E-\u6A21\u7CCA\u67E5\u8BE2\u7528\u4E8E\u641C\u7D22"},{"level":2,"title":"\u67E5\u8BE2 name \u4E2D\u4EE5 mongo \u5F00\u5934\u7684","slug":"\u67E5\u8BE2-name-\u4E2D\u4EE5-mongo-\u5F00\u5934\u7684"},{"level":2,"title":"\u67E5\u8BE2\u6307\u5B9A\u5217 name\u3001age \u6570\u636E","slug":"\u67E5\u8BE2\u6307\u5B9A\u5217-name\u3001age-\u6570\u636E"},{"level":2,"title":"\u67E5\u8BE2\u6307\u5B9A\u5217 name\u3001age \u6570\u636E, age > 25","slug":"\u67E5\u8BE2\u6307\u5B9A\u5217-name\u3001age-\u6570\u636E-age-25"},{"level":2,"title":"\u6309\u7167\u5E74\u9F84\u6392\u5E8F 1 \u5347\u5E8F -1 \u964D\u5E8F","slug":"\u6309\u7167\u5E74\u9F84\u6392\u5E8F-1-\u5347\u5E8F-1-\u964D\u5E8F"},{"level":2,"title":"\u67E5\u8BE2 name = zhangsan, age = 22 \u7684\u6570\u636E","slug":"\u67E5\u8BE2-name-zhangsan-age-22-\u7684\u6570\u636E"},{"level":2,"title":"\u67E5\u8BE2\u524D 5 \u6761\u6570\u636E","slug":"\u67E5\u8BE2\u524D-5-\u6761\u6570\u636E"},{"level":2,"title":"\u67E5\u8BE2\u5728 5-10 \u4E4B\u95F4\u7684\u6570\u636E","slug":"\u67E5\u8BE2\u5728-5-10-\u4E4B\u95F4\u7684\u6570\u636E"},{"level":2,"title":"or \u4E0E \u67E5\u8BE2","slug":"or-\u4E0E-\u67E5\u8BE2"},{"level":2,"title":"findOne \u67E5\u8BE2\u7B2C\u4E00\u6761\u6570\u636E","slug":"findone-\u67E5\u8BE2\u7B2C\u4E00\u6761\u6570\u636E"},{"level":2,"title":"\u67E5\u8BE2\u67D0\u4E2A\u7ED3\u679C\u96C6\u7684\u8BB0\u5F55\u6761\u6570 \u7EDF\u8BA1\u6570\u91CF","slug":"\u67E5\u8BE2\u67D0\u4E2A\u7ED3\u679C\u96C6\u7684\u8BB0\u5F55\u6761\u6570-\u7EDF\u8BA1\u6570\u91CF"},{"level":2,"title":"\u67E5\u627E\u540D\u5B57\u53EB\u505A\u5C0F\u660E\u7684\uFF0C\u628A\u5E74\u9F84\u66F4\u6539\u4E3A 16 \u5C81:","slug":"\u67E5\u627E\u540D\u5B57\u53EB\u505A\u5C0F\u660E\u7684\uFF0C\u628A\u5E74\u9F84\u66F4\u6539\u4E3A-16-\u5C81"},{"level":2,"title":"\u67E5\u627E\u6570\u5B66\u6210\u7EE9\u662F 70\uFF0C\u628A\u5E74\u9F84\u66F4\u6539\u4E3A 33 \u5C81:","slug":"\u67E5\u627E\u6570\u5B66\u6210\u7EE9\u662F-70\uFF0C\u628A\u5E74\u9F84\u66F4\u6539\u4E3A-33-\u5C81"},{"level":2,"title":"\u66F4\u6539\u6240\u6709\u7537\u7528\u6237\u7684\u7684\u5E74\u7EAA","slug":"\u66F4\u6539\u6240\u6709\u7537\u7528\u6237\u7684\u7684\u5E74\u7EAA"},{"level":2,"title":"\u5B8C\u6574\u66FF\u6362\uFF0C\u4E0D\u51FA\u73B0$set\u5173\u952E\u5B57","slug":"\u5B8C\u6574\u66FF\u6362\uFF0C\u4E0D\u51FA\u73B0-set\u5173\u952E\u5B57"},{"level":2,"title":"\u64CD\u4F5C\u52A0","slug":"\u64CD\u4F5C\u52A0"},{"level":2,"title":"\u5220\u9664\u6570\u636E","slug":"\u5220\u9664\u6570\u636E"},{"level":2,"title":"\u7D22\u5F15\u57FA\u7840","slug":"\u7D22\u5F15\u57FA\u7840"},{"level":2,"title":"\u521B\u5EFA\u7D22\u5F15\u7684\u547D\u4EE4","slug":"\u521B\u5EFA\u7D22\u5F15\u7684\u547D\u4EE4"},{"level":2,"title":"\u83B7\u53D6\u5F53\u524D\u96C6\u5408\u7684\u7D22\u5F15","slug":"\u83B7\u53D6\u5F53\u524D\u96C6\u5408\u7684\u7D22\u5F15"},{"level":2,"title":"\u5220\u9664\u7D22\u5F15\u7684\u547D\u4EE4\u662F","slug":"\u5220\u9664\u7D22\u5F15\u7684\u547D\u4EE4\u662F"},{"level":2,"title":"\u5728 MongoDB \u4E2D\uFF0C\u6211\u4EEC\u540C\u6837\u53EF\u4EE5\u521B\u5EFA\u590D\u5408\u7D22\u5F15","slug":"\u5728-mongodb-\u4E2D\uFF0C\u6211\u4EEC\u540C\u6837\u53EF\u4EE5\u521B\u5EFA\u590D\u5408\u7D22\u5F15"},{"level":2,"title":"\u4E0B\u9762\u7684\u547D\u4EE4\u53EF\u4EE5\u5728\u521B\u5EFA\u7D22\u5F15\u65F6\u4E3A\u5176\u6307\u5B9A\u7D22\u5F15\u540D","slug":"\u4E0B\u9762\u7684\u547D\u4EE4\u53EF\u4EE5\u5728\u521B\u5EFA\u7D22\u5F15\u65F6\u4E3A\u5176\u6307\u5B9A\u7D22\u5F15\u540D"},{"level":2,"title":"\u552F\u4E00\u7D22\u5F15","slug":"\u552F\u4E00\u7D22\u5F15"},{"level":2,"title":"\u4F7F\u7528 explain  explain \u4F1A\u8FD4\u56DE\u67E5\u8BE2\u4F7F\u7528\u7684\u7D22\u5F15\u60C5\u51B5\uFF0C\u8017\u65F6\u548C\u626B\u63CF\u6587\u6863\u6570\u7684\u7EDF\u8BA1\u4FE1\u606F\u3002","slug":"\u4F7F\u7528-explain-explain-\u4F1A\u8FD4\u56DE\u67E5\u8BE2\u4F7F\u7528\u7684\u7D22\u5F15\u60C5\u51B5\uFF0C\u8017\u65F6\u548C\u626B\u63CF\u6587\u6863\u6570\u7684\u7EDF\u8BA1\u4FE1\u606F\u3002"},{"level":2,"title":"Mongodb \u8D26\u6237\u6743\u9650\u914D\u7F6E","slug":"mongodb-\u8D26\u6237\u6743\u9650\u914D\u7F6E"},{"level":2,"title":"\u7B2C\u4E00\u6B65\u521B\u5EFA\u8D85\u7EA7\u7BA1\u7406\u7528\u6237","slug":"\u7B2C\u4E00\u6B65\u521B\u5EFA\u8D85\u7EA7\u7BA1\u7406\u7528\u6237"},{"level":2,"title":"\u7B2C\u4E8C\u6B65\u4FEE\u6539 Mongodb \u6570\u636E\u5E93\u914D\u7F6E\u6587\u4EF6","slug":"\u7B2C\u4E8C\u6B65\u4FEE\u6539-mongodb-\u6570\u636E\u5E93\u914D\u7F6E\u6587\u4EF6"},{"level":2,"title":"\u7B2C\u4E09\u6B65\u91CD\u542F mongodb \u670D\u52A1","slug":"\u7B2C\u4E09\u6B65\u91CD\u542F-mongodb-\u670D\u52A1"},{"level":2,"title":"\u7B2C\u56DB\u6B65\u7528\u8D85\u7EA7\u7BA1\u7406\u5458\u8D26\u6237\u8FDE\u63A5\u6570\u636E\u5E93","slug":"\u7B2C\u56DB\u6B65\u7528\u8D85\u7EA7\u7BA1\u7406\u5458\u8D26\u6237\u8FDE\u63A5\u6570\u636E\u5E93"},{"level":2,"title":"\u7B2C\u4E94\u6B65\u7ED9 eggcms \u6570\u636E\u5E93\u521B\u5EFA\u4E00\u4E2A\u7528\u6237 \u53EA\u80FD\u8BBF\u95EE eggcms \u4E0D\u80FD\u8BBF\u95EE\u5176\u4ED6\u6570\u636E\u5E93","slug":"\u7B2C\u4E94\u6B65\u7ED9-eggcms-\u6570\u636E\u5E93\u521B\u5EFA\u4E00\u4E2A\u7528\u6237-\u53EA\u80FD\u8BBF\u95EE-eggcms-\u4E0D\u80FD\u8BBF\u95EE\u5176\u4ED6\u6570\u636E\u5E93"},{"level":2,"title":"Mongodb \u8D26\u6237\u6743\u9650\u914D\u7F6E\u4E2D\u5E38\u7528\u7684\u547D\u4EE4","slug":"mongodb-\u8D26\u6237\u6743\u9650\u914D\u7F6E\u4E2D\u5E38\u7528\u7684\u547D\u4EE4"},{"level":2,"title":"Mongodb \u6570\u636E\u5E93\u89D2\u8272","slug":"mongodb-\u6570\u636E\u5E93\u89D2\u8272"},{"level":2,"title":"\u8FDE\u63A5\u6570\u636E\u5E93\u7684\u65F6\u5019\u9700\u8981\u914D\u7F6E\u8D26\u6237\u5BC6\u7801","slug":"\u8FDE\u63A5\u6570\u636E\u5E93\u7684\u65F6\u5019\u9700\u8981\u914D\u7F6E\u8D26\u6237\u5BC6\u7801"},{"level":2,"title":"MongoDB \u805A\u5408\u7BA1\u9053","slug":"mongodb-\u805A\u5408\u7BA1\u9053"},{"level":2,"title":"MongoDB Aggregation \u7BA1\u9053\u64CD\u4F5C\u7B26\u4E0E\u8868\u8FBE\u5F0F","slug":"mongodb-aggregation-\u7BA1\u9053\u64CD\u4F5C\u7B26\u4E0E\u8868\u8FBE\u5F0F"},{"level":2,"title":"\u7BA1\u9053\u8868\u8FBE\u5F0F:","slug":"\u7BA1\u9053\u8868\u8FBE\u5F0F"},{"level":2,"title":"\u6570\u636E\u6A21\u62DF","slug":"\u6570\u636E\u6A21\u62DF"}],"relativePath":"\u4E3B\u9875/\u5DE5\u5177/MongoDB\u547D\u4EE4.md"}'),o={name:"\u4E3B\u9875/\u5DE5\u5177/MongoDB\u547D\u4EE4.md"},p=l(`<h2 id="\u5207\u6362\u548C\u521B\u5EFA\u6570\u636E\u5E93" tabindex="-1">\u5207\u6362\u548C\u521B\u5EFA\u6570\u636E\u5E93 <a class="header-anchor" href="#\u5207\u6362\u548C\u521B\u5EFA\u6570\u636E\u5E93" aria-hidden="true">#</a></h2><ul><li>use xxx</li></ul><h2 id="\u67E5\u770B\u6570\u636E\u5E93" tabindex="-1">\u67E5\u770B\u6570\u636E\u5E93 <a class="header-anchor" href="#\u67E5\u770B\u6570\u636E\u5E93" aria-hidden="true">#</a></h2><ul><li>show dbs</li></ul><h2 id="\u663E\u793A\u5F53\u524D\u7684\u6570\u636E\u96C6\u5408" tabindex="-1">\u663E\u793A\u5F53\u524D\u7684\u6570\u636E\u96C6\u5408 <a class="header-anchor" href="#\u663E\u793A\u5F53\u524D\u7684\u6570\u636E\u96C6\u5408" aria-hidden="true">#</a></h2><ul><li>show collections</li></ul><h2 id="\u5220\u9664\u96C6\u5408\uFF0C\u5220\u9664\u6307\u5B9A\u7684\u96C6\u5408-\u5220\u9664\u8868" tabindex="-1">\u5220\u9664\u96C6\u5408\uFF0C\u5220\u9664\u6307\u5B9A\u7684\u96C6\u5408 \u5220\u9664\u8868 <a class="header-anchor" href="#\u5220\u9664\u96C6\u5408\uFF0C\u5220\u9664\u6307\u5B9A\u7684\u96C6\u5408-\u5220\u9664\u8868" aria-hidden="true">#</a></h2><ul><li>db.user.drop()</li></ul><h2 id="\u5220\u9664\u5E93" tabindex="-1">\u5220\u9664\u5E93 <a class="header-anchor" href="#\u5220\u9664\u5E93" aria-hidden="true">#</a></h2><ul><li>db.dropDatabase();</li></ul><h2 id="\u65B0\u589E\u4E00\u6761\u8BB0\u5F55" tabindex="-1">\u65B0\u589E\u4E00\u6761\u8BB0\u5F55 <a class="header-anchor" href="#\u65B0\u589E\u4E00\u6761\u8BB0\u5F55" aria-hidden="true">#</a></h2><ul><li>db.user.insert({&quot;name&quot;:&quot;zhangsan&quot;\uFF0C&quot;age&quot;:20});</li></ul><h2 id="\u67E5\u8BE2\u6240\u6709\u8BB0\u5F55" tabindex="-1">\u67E5\u8BE2\u6240\u6709\u8BB0\u5F55 <a class="header-anchor" href="#\u67E5\u8BE2\u6240\u6709\u8BB0\u5F55" aria-hidden="true">#</a></h2><ul><li>db.user.find();</li></ul><h2 id="\u67E5\u8BE2\u53BB\u6389\u540E\u7684\u5F53\u524D\u805A\u96C6\u96C6\u5408\u4E2D\u7684\u67D0\u5217\u7684\u91CD\u590D\u6570\u636E-\u4F1A\u8FC7\u6EE4\u6389-name-\u4E2D\u7684\u76F8\u540C\u6570\u636E" tabindex="-1">\u67E5\u8BE2\u53BB\u6389\u540E\u7684\u5F53\u524D\u805A\u96C6\u96C6\u5408\u4E2D\u7684\u67D0\u5217\u7684\u91CD\u590D\u6570\u636E \u4F1A\u8FC7\u6EE4\u6389 name \u4E2D\u7684\u76F8\u540C\u6570\u636E <a class="header-anchor" href="#\u67E5\u8BE2\u53BB\u6389\u540E\u7684\u5F53\u524D\u805A\u96C6\u96C6\u5408\u4E2D\u7684\u67D0\u5217\u7684\u91CD\u590D\u6570\u636E-\u4F1A\u8FC7\u6EE4\u6389-name-\u4E2D\u7684\u76F8\u540C\u6570\u636E" aria-hidden="true">#</a></h2><ul><li>db.user.distinct(&quot;name&quot;);</li></ul><h2 id="\u67E5\u8BE2-age-22-\u7684\u8BB0\u5F55" tabindex="-1">\u67E5\u8BE2 age = 22 \u7684\u8BB0\u5F55 <a class="header-anchor" href="#\u67E5\u8BE2-age-22-\u7684\u8BB0\u5F55" aria-hidden="true">#</a></h2><ul><li>db.user.find({&quot;age&quot;: 22});</li></ul><h2 id="\u67E5\u8BE2-age-22-\u7684\u8BB0\u5F55-1" tabindex="-1">\u67E5\u8BE2 age &gt; 22 \u7684\u8BB0\u5F55 <a class="header-anchor" href="#\u67E5\u8BE2-age-22-\u7684\u8BB0\u5F55-1" aria-hidden="true">#</a></h2><ul><li>db.user.find({age: {$gt: 22}});</li></ul><h2 id="\u67E5\u8BE2-age-22-\u7684\u8BB0\u5F55-2" tabindex="-1">\u67E5\u8BE2 age &lt; 22 \u7684\u8BB0\u5F55 <a class="header-anchor" href="#\u67E5\u8BE2-age-22-\u7684\u8BB0\u5F55-2" aria-hidden="true">#</a></h2><ul><li>db.user.find({age: {$lt: 22}});</li></ul><h2 id="\u67E5\u8BE2-age-25-\u7684\u8BB0\u5F55" tabindex="-1">\u67E5\u8BE2 age &gt;= 25 \u7684\u8BB0\u5F55 <a class="header-anchor" href="#\u67E5\u8BE2-age-25-\u7684\u8BB0\u5F55" aria-hidden="true">#</a></h2><ul><li>db.user.find({age: {$gte: 25}});</li></ul><h2 id="\u67E5\u8BE2-age-25-\u7684\u8BB0\u5F55-1" tabindex="-1">\u67E5\u8BE2 age &lt;= 25 \u7684\u8BB0\u5F55 <a class="header-anchor" href="#\u67E5\u8BE2-age-25-\u7684\u8BB0\u5F55-1" aria-hidden="true">#</a></h2><ul><li>db.user.find({age: {$lte: 25}});</li></ul><h2 id="\u67E5\u8BE2-age-23-\u5E76\u4E14-age-26-\u6CE8\u610F\u4E66\u5199\u683C\u5F0F" tabindex="-1">\u67E5\u8BE2 age &gt;= 23 \u5E76\u4E14 age &lt;= 26 \u6CE8\u610F\u4E66\u5199\u683C\u5F0F <a class="header-anchor" href="#\u67E5\u8BE2-age-23-\u5E76\u4E14-age-26-\u6CE8\u610F\u4E66\u5199\u683C\u5F0F" aria-hidden="true">#</a></h2><ul><li>db.user.find({age: {$gte: 23, $lte: 26}});</li></ul><h2 id="\u67E5\u8BE2-name-\u4E2D\u5305\u542B-mongo-\u7684\u6570\u636E-\u6A21\u7CCA\u67E5\u8BE2\u7528\u4E8E\u641C\u7D22" tabindex="-1">\u67E5\u8BE2 name \u4E2D\u5305\u542B mongo \u7684\u6570\u636E \u6A21\u7CCA\u67E5\u8BE2\u7528\u4E8E\u641C\u7D22 <a class="header-anchor" href="#\u67E5\u8BE2-name-\u4E2D\u5305\u542B-mongo-\u7684\u6570\u636E-\u6A21\u7CCA\u67E5\u8BE2\u7528\u4E8E\u641C\u7D22" aria-hidden="true">#</a></h2><ul><li>db.user.find({name: /mongo/});</li></ul><h2 id="\u67E5\u8BE2-name-\u4E2D\u4EE5-mongo-\u5F00\u5934\u7684" tabindex="-1">\u67E5\u8BE2 name \u4E2D\u4EE5 mongo \u5F00\u5934\u7684 <a class="header-anchor" href="#\u67E5\u8BE2-name-\u4E2D\u4EE5-mongo-\u5F00\u5934\u7684" aria-hidden="true">#</a></h2><ul><li>db.user.find({name: /^mongo/});</li></ul><h2 id="\u67E5\u8BE2\u6307\u5B9A\u5217-name\u3001age-\u6570\u636E" tabindex="-1">\u67E5\u8BE2\u6307\u5B9A\u5217 name\u3001age \u6570\u636E <a class="header-anchor" href="#\u67E5\u8BE2\u6307\u5B9A\u5217-name\u3001age-\u6570\u636E" aria-hidden="true">#</a></h2><ul><li>db.user.find({}, {name: 1, age: 1});</li></ul><p>\u5F53\u7136 name \u4E5F\u53EF\u4EE5\u7528 true \u6216 false,\u5F53\u7528 ture \u7684\u60C5\u51B5\u4E0B\u6CB3 name:1 \u6548\u679C\u4E00\u6837\uFF0C\u5982\u679C\u7528 false \u5C31</p><p>\u662F\u6392\u9664 name\uFF0C\u663E\u793A name \u4EE5\u5916\u7684\u5217\u4FE1\u606F\u3002</p><h2 id="\u67E5\u8BE2\u6307\u5B9A\u5217-name\u3001age-\u6570\u636E-age-25" tabindex="-1">\u67E5\u8BE2\u6307\u5B9A\u5217 name\u3001age \u6570\u636E, age &gt; 25 <a class="header-anchor" href="#\u67E5\u8BE2\u6307\u5B9A\u5217-name\u3001age-\u6570\u636E-age-25" aria-hidden="true">#</a></h2><ul><li>db.user.find({age: {$gt: 25}}, {name: 1, age: 1});</li></ul><h2 id="\u6309\u7167\u5E74\u9F84\u6392\u5E8F-1-\u5347\u5E8F-1-\u964D\u5E8F" tabindex="-1">\u6309\u7167\u5E74\u9F84\u6392\u5E8F 1 \u5347\u5E8F -1 \u964D\u5E8F <a class="header-anchor" href="#\u6309\u7167\u5E74\u9F84\u6392\u5E8F-1-\u5347\u5E8F-1-\u964D\u5E8F" aria-hidden="true">#</a></h2><ul><li>db.user.find().sort({age: 1});</li><li>db.user.find().sort({age: -1});</li></ul><h2 id="\u67E5\u8BE2-name-zhangsan-age-22-\u7684\u6570\u636E" tabindex="-1">\u67E5\u8BE2 name = zhangsan, age = 22 \u7684\u6570\u636E <a class="header-anchor" href="#\u67E5\u8BE2-name-zhangsan-age-22-\u7684\u6570\u636E" aria-hidden="true">#</a></h2><ul><li>db.user.find({name: &#39;zhangsan&#39;, age: 22});</li></ul><h2 id="\u67E5\u8BE2\u524D-5-\u6761\u6570\u636E" tabindex="-1">\u67E5\u8BE2\u524D 5 \u6761\u6570\u636E <a class="header-anchor" href="#\u67E5\u8BE2\u524D-5-\u6761\u6570\u636E" aria-hidden="true">#</a></h2><ul><li>db.user.find().limit(5);</li></ul><h2 id="\u67E5\u8BE2\u5728-5-10-\u4E4B\u95F4\u7684\u6570\u636E" tabindex="-1">\u67E5\u8BE2\u5728 5-10 \u4E4B\u95F4\u7684\u6570\u636E <a class="header-anchor" href="#\u67E5\u8BE2\u5728-5-10-\u4E4B\u95F4\u7684\u6570\u636E" aria-hidden="true">#</a></h2><ul><li>db.user.find().limit(10).skip(5);</li></ul><p>\u53EF\u7528\u4E8E\u5206\u9875\uFF0Climit \u662F pageSize\uFF0Cskip \u662F(page-1)*pageSize</p><h2 id="or-\u4E0E-\u67E5\u8BE2" tabindex="-1">or \u4E0E \u67E5\u8BE2 <a class="header-anchor" href="#or-\u4E0E-\u67E5\u8BE2" aria-hidden="true">#</a></h2><ul><li>db.user.find({$or: [{age: 22}, {age: 25}]});</li></ul><h2 id="findone-\u67E5\u8BE2\u7B2C\u4E00\u6761\u6570\u636E" tabindex="-1">findOne \u67E5\u8BE2\u7B2C\u4E00\u6761\u6570\u636E <a class="header-anchor" href="#findone-\u67E5\u8BE2\u7B2C\u4E00\u6761\u6570\u636E" aria-hidden="true">#</a></h2><ul><li>db.user.findOne();</li></ul><h2 id="\u67E5\u8BE2\u67D0\u4E2A\u7ED3\u679C\u96C6\u7684\u8BB0\u5F55\u6761\u6570-\u7EDF\u8BA1\u6570\u91CF" tabindex="-1">\u67E5\u8BE2\u67D0\u4E2A\u7ED3\u679C\u96C6\u7684\u8BB0\u5F55\u6761\u6570 \u7EDF\u8BA1\u6570\u91CF <a class="header-anchor" href="#\u67E5\u8BE2\u67D0\u4E2A\u7ED3\u679C\u96C6\u7684\u8BB0\u5F55\u6761\u6570-\u7EDF\u8BA1\u6570\u91CF" aria-hidden="true">#</a></h2><ul><li>db.user.find({age: {$gte: 25}}).count();</li></ul><p>\u5982\u679C\u8981\u8FD4\u56DE\u9650\u5236\u4E4B\u540E\u7684\u8BB0\u5F55\u6570\u91CF\uFF0C\u8981\u4F7F\u7528 count(true)\u6216\u8005 count(\u975E 0)</p><ul><li>db.users.find().skip(10).limit(5).count(true);</li></ul><h2 id="\u67E5\u627E\u540D\u5B57\u53EB\u505A\u5C0F\u660E\u7684\uFF0C\u628A\u5E74\u9F84\u66F4\u6539\u4E3A-16-\u5C81" tabindex="-1">\u67E5\u627E\u540D\u5B57\u53EB\u505A\u5C0F\u660E\u7684\uFF0C\u628A\u5E74\u9F84\u66F4\u6539\u4E3A 16 \u5C81: <a class="header-anchor" href="#\u67E5\u627E\u540D\u5B57\u53EB\u505A\u5C0F\u660E\u7684\uFF0C\u628A\u5E74\u9F84\u66F4\u6539\u4E3A-16-\u5C81" aria-hidden="true">#</a></h2><ul><li>db.student.update({&quot;name&quot;:&quot;\u5C0F\u660E&quot;},{$set:{&quot;age&quot;:16}});</li></ul><h2 id="\u67E5\u627E\u6570\u5B66\u6210\u7EE9\u662F-70\uFF0C\u628A\u5E74\u9F84\u66F4\u6539\u4E3A-33-\u5C81" tabindex="-1">\u67E5\u627E\u6570\u5B66\u6210\u7EE9\u662F 70\uFF0C\u628A\u5E74\u9F84\u66F4\u6539\u4E3A 33 \u5C81: <a class="header-anchor" href="#\u67E5\u627E\u6570\u5B66\u6210\u7EE9\u662F-70\uFF0C\u628A\u5E74\u9F84\u66F4\u6539\u4E3A-33-\u5C81" aria-hidden="true">#</a></h2><ul><li>db.student.update({&quot;score.shuxue&quot;:70},{$set:{&quot;age&quot;:33}});</li></ul><h2 id="\u66F4\u6539\u6240\u6709\u7537\u7528\u6237\u7684\u7684\u5E74\u7EAA" tabindex="-1">\u66F4\u6539\u6240\u6709\u7537\u7528\u6237\u7684\u7684\u5E74\u7EAA <a class="header-anchor" href="#\u66F4\u6539\u6240\u6709\u7537\u7528\u6237\u7684\u7684\u5E74\u7EAA" aria-hidden="true">#</a></h2><ul><li>db.student.update({&quot;sex&quot;:&quot;\u7537&quot;},{$set:{&quot;age&quot;:33}},{multi: true});</li></ul><h2 id="\u5B8C\u6574\u66FF\u6362\uFF0C\u4E0D\u51FA\u73B0-set\u5173\u952E\u5B57" tabindex="-1">\u5B8C\u6574\u66FF\u6362\uFF0C\u4E0D\u51FA\u73B0$set\u5173\u952E\u5B57 <a class="header-anchor" href="#\u5B8C\u6574\u66FF\u6362\uFF0C\u4E0D\u51FA\u73B0-set\u5173\u952E\u5B57" aria-hidden="true">#</a></h2><ul><li>db.student.update({&quot;name&quot;:&quot;\u5C0F\u660E&quot;},{&quot;name&quot;:&quot;\u5927\u660E&quot;,&quot;age&quot;:16});</li></ul><h2 id="\u64CD\u4F5C\u52A0" tabindex="-1">\u64CD\u4F5C\u52A0 <a class="header-anchor" href="#\u64CD\u4F5C\u52A0" aria-hidden="true">#</a></h2><ul><li>db.users.update({name: &#39;Lisi&#39;}, {$inc: {age: 50}}, false, true);</li></ul><p>\u76F8\u5F53\u4E8E:update users set age = age + 50 where name = \u2018Lisi\u2019;</p><ul><li>db.users.update({name: &#39;Lisi&#39;}, {$inc: {age: 50}, $set: false, true);</li></ul><p>\u76F8\u5F53\u4E8E:update users set age = age + 50, name = \u2018hoho\u2019 where name = \u2018Lisi\u2019;</p><h2 id="\u5220\u9664\u6570\u636E" tabindex="-1">\u5220\u9664\u6570\u636E <a class="header-anchor" href="#\u5220\u9664\u6570\u636E" aria-hidden="true">#</a></h2><ul><li><p>db.collectionsNames.remove( { &quot;borough&quot;: &quot;Manhattan&quot; } )</p></li><li><p>db.users.remove({age: 132});</p></li><li><p>db.restaurants.remove( { &quot;borough&quot;: &quot;Queens&quot; }, { justOne: true } ) \u9ED8\u8BA4\u5220\u9664\u4E00\u6761</p></li></ul><h2 id="\u7D22\u5F15\u57FA\u7840" tabindex="-1">\u7D22\u5F15\u57FA\u7840 <a class="header-anchor" href="#\u7D22\u5F15\u57FA\u7840" aria-hidden="true">#</a></h2><p>\u7D22\u5F15\u662F\u5BF9\u6570\u636E\u5E93\u8868\u4E2D\u4E00\u5217\u6216\u591A\u5217\u7684\u503C\u8FDB\u884C\u6392\u5E8F\u7684\u4E00\u79CD\u7ED3\u6784\uFF0C\u53EF\u4EE5\u8BA9\u6211\u4EEC\u67E5\u8BE2\u6570\u636E\u5E93\u53D8\u5F97 \u66F4\u5FEB\u3002</p><h2 id="\u521B\u5EFA\u7D22\u5F15\u7684\u547D\u4EE4" tabindex="-1">\u521B\u5EFA\u7D22\u5F15\u7684\u547D\u4EE4 <a class="header-anchor" href="#\u521B\u5EFA\u7D22\u5F15\u7684\u547D\u4EE4" aria-hidden="true">#</a></h2><ul><li>db.user.ensureIndex({&quot;userame&quot;:1})</li></ul><h2 id="\u83B7\u53D6\u5F53\u524D\u96C6\u5408\u7684\u7D22\u5F15" tabindex="-1">\u83B7\u53D6\u5F53\u524D\u96C6\u5408\u7684\u7D22\u5F15 <a class="header-anchor" href="#\u83B7\u53D6\u5F53\u524D\u96C6\u5408\u7684\u7D22\u5F15" aria-hidden="true">#</a></h2><ul><li>db.user.getIndexes()</li></ul><h2 id="\u5220\u9664\u7D22\u5F15\u7684\u547D\u4EE4\u662F" tabindex="-1">\u5220\u9664\u7D22\u5F15\u7684\u547D\u4EE4\u662F <a class="header-anchor" href="#\u5220\u9664\u7D22\u5F15\u7684\u547D\u4EE4\u662F" aria-hidden="true">#</a></h2><ul><li>db.user.dropIndex({&quot;username&quot;:1})</li></ul><h2 id="\u5728-mongodb-\u4E2D\uFF0C\u6211\u4EEC\u540C\u6837\u53EF\u4EE5\u521B\u5EFA\u590D\u5408\u7D22\u5F15" tabindex="-1">\u5728 MongoDB \u4E2D\uFF0C\u6211\u4EEC\u540C\u6837\u53EF\u4EE5\u521B\u5EFA\u590D\u5408\u7D22\u5F15 <a class="header-anchor" href="#\u5728-mongodb-\u4E2D\uFF0C\u6211\u4EEC\u540C\u6837\u53EF\u4EE5\u521B\u5EFA\u590D\u5408\u7D22\u5F15" aria-hidden="true">#</a></h2><p>\u5982:\u6570\u5B57 1 \u8868\u793A username \u952E\u7684\u7D22\u5F15\u6309\u5347\u5E8F\u5B58\u50A8\uFF0C-1 \u8868\u793A age \u952E\u7684\u7D22\u5F15\u6309\u7167\u964D\u5E8F\u65B9\u5F0F\u5B58\u50A8\u3002</p><ul><li>db.user.ensureIndex({&quot;username&quot;:1, &quot;age&quot;:-1})</li></ul><p>\u8BE5\u7D22\u5F15\u88AB\u521B\u5EFA\u540E\uFF0C\u57FA\u4E8E username \u548C age \u7684\u67E5\u8BE2\u5C06\u4F1A\u7528\u5230\u8BE5\u7D22\u5F15\uFF0C\u6216\u8005\u662F\u57FA\u4E8E username \u7684\u67E5\u8BE2\u4E5F\u4F1A\u7528\u5230\u8BE5\u7D22\u5F15\uFF0C\u4F46\u662F\u53EA\u662F\u57FA\u4E8E age \u7684\u67E5\u8BE2\u5C06\u4E0D\u4F1A\u7528\u5230\u8BE5\u590D\u5408\u7D22\u5F15\u3002\u56E0\u6B64\u53EF\u4EE5\u8BF4\uFF0C \u5982\u679C\u60F3\u7528\u5230\u590D\u5408\u7D22\u5F15\uFF0C\u5FC5\u987B\u5728\u67E5\u8BE2\u6761\u4EF6\u4E2D\u5305\u542B\u590D\u5408\u7D22\u5F15\u4E2D\u7684\u524D N \u4E2A\u7D22\u5F15\u5217\u3002\u7136\u800C\u5982\u679C\u67E5\u8BE2 \u6761\u4EF6\u4E2D\u7684\u952E\u503C\u987A\u5E8F\u548C\u590D\u5408\u7D22\u5F15\u4E2D\u7684\u521B\u5EFA\u987A\u5E8F\u4E0D\u4E00\u81F4\u7684\u8BDD\uFF0CMongoDB \u53EF\u4EE5\u667A\u80FD\u7684\u5E2E\u52A9\u6211\u4EEC\u8C03 \u6574\u8BE5\u987A\u5E8F\uFF0C\u4EE5\u4FBF\u4F7F\u590D\u5408\u7D22\u5F15\u53EF\u4EE5\u4E3A\u67E5\u8BE2\u6240\u7528\u3002</p><h2 id="\u4E0B\u9762\u7684\u547D\u4EE4\u53EF\u4EE5\u5728\u521B\u5EFA\u7D22\u5F15\u65F6\u4E3A\u5176\u6307\u5B9A\u7D22\u5F15\u540D" tabindex="-1">\u4E0B\u9762\u7684\u547D\u4EE4\u53EF\u4EE5\u5728\u521B\u5EFA\u7D22\u5F15\u65F6\u4E3A\u5176\u6307\u5B9A\u7D22\u5F15\u540D <a class="header-anchor" href="#\u4E0B\u9762\u7684\u547D\u4EE4\u53EF\u4EE5\u5728\u521B\u5EFA\u7D22\u5F15\u65F6\u4E3A\u5176\u6307\u5B9A\u7D22\u5F15\u540D" aria-hidden="true">#</a></h2><ul><li>db.user.ensureIndex({&quot;username&quot;:1},{&quot;name&quot;:&quot;userindex&quot;})</li></ul><p>\u968F\u7740\u96C6\u5408\u7684\u589E\u957F\uFF0C\u9700\u8981\u9488\u5BF9\u67E5\u8BE2\u4E2D\u5927\u91CF\u7684\u6392\u5E8F\u505A\u7D22\u5F15\u3002\u5982\u679C\u6CA1\u6709\u5BF9\u7D22\u5F15\u7684\u952E\u8C03\u7528 sort\uFF0C MongoDB \u9700\u8981\u5C06\u6240\u6709\u6570\u636E\u63D0\u53D6\u5230\u5185\u5B58\u5E76\u6392\u5E8F\u3002\u56E0\u6B64\u5728\u505A\u65E0\u7D22\u5F15\u6392\u5E8F\u65F6\uFF0C\u5982\u679C\u6570\u636E\u91CF\u8FC7\u5927\u4EE5 \u81F4\u65E0\u6CD5\u5728\u5185\u5B58\u4E2D\u8FDB\u884C\u6392\u5E8F\uFF0C\u6B64\u65F6 MongoDB \u5C06\u4F1A\u62A5\u9519\u3002</p><h2 id="\u552F\u4E00\u7D22\u5F15" tabindex="-1">\u552F\u4E00\u7D22\u5F15 <a class="header-anchor" href="#\u552F\u4E00\u7D22\u5F15" aria-hidden="true">#</a></h2><ul><li>db.user.ensureIndex({&quot;userid&quot;:1},{&quot;unique&quot;:true})</li></ul><p><img src="https://cdn.nlark.com/yuque/0/2021/png/2479971/1624777268494-238af6ec-741b-4f81-8145-56859c6011c7.png" alt="img"></p><h2 id="\u4F7F\u7528-explain-explain-\u4F1A\u8FD4\u56DE\u67E5\u8BE2\u4F7F\u7528\u7684\u7D22\u5F15\u60C5\u51B5\uFF0C\u8017\u65F6\u548C\u626B\u63CF\u6587\u6863\u6570\u7684\u7EDF\u8BA1\u4FE1\u606F\u3002" tabindex="-1">\u4F7F\u7528 explain explain \u4F1A\u8FD4\u56DE\u67E5\u8BE2\u4F7F\u7528\u7684\u7D22\u5F15\u60C5\u51B5\uFF0C\u8017\u65F6\u548C\u626B\u63CF\u6587\u6863\u6570\u7684\u7EDF\u8BA1\u4FE1\u606F\u3002 <a class="header-anchor" href="#\u4F7F\u7528-explain-explain-\u4F1A\u8FD4\u56DE\u67E5\u8BE2\u4F7F\u7528\u7684\u7D22\u5F15\u60C5\u51B5\uFF0C\u8017\u65F6\u548C\u626B\u63CF\u6587\u6863\u6570\u7684\u7EDF\u8BA1\u4FE1\u606F\u3002" aria-hidden="true">#</a></h2><ul><li>db.tablename.find().explain( &quot;executionStats&quot; )</li></ul><p>\u5173\u6CE8\u8F93\u51FA\u7684\u5982\u4E0B\u6570\u503C:explain.executionStats.executionTimeMillis</p><h2 id="mongodb-\u8D26\u6237\u6743\u9650\u914D\u7F6E" tabindex="-1">Mongodb \u8D26\u6237\u6743\u9650\u914D\u7F6E <a class="header-anchor" href="#mongodb-\u8D26\u6237\u6743\u9650\u914D\u7F6E" aria-hidden="true">#</a></h2><h2 id="\u7B2C\u4E00\u6B65\u521B\u5EFA\u8D85\u7EA7\u7BA1\u7406\u7528\u6237" tabindex="-1">\u7B2C\u4E00\u6B65\u521B\u5EFA\u8D85\u7EA7\u7BA1\u7406\u7528\u6237 <a class="header-anchor" href="#\u7B2C\u4E00\u6B65\u521B\u5EFA\u8D85\u7EA7\u7BA1\u7406\u7528\u6237" aria-hidden="true">#</a></h2><div class="language-javascript"><span class="copy"></span><pre><code><span class="line"><span style="color:#A6ACCD;">use admin </span></span>
<span class="line"><span style="color:#A6ACCD;">db</span><span style="color:#89DDFF;">.</span><span style="color:#82AAFF;">createUser</span><span style="color:#A6ACCD;">(</span><span style="color:#89DDFF;">{</span></span>
<span class="line"><span style="color:#F07178;">user</span><span style="color:#89DDFF;">:</span><span style="color:#89DDFF;">&#39;</span><span style="color:#C3E88D;">admin</span><span style="color:#89DDFF;">&#39;</span><span style="color:#89DDFF;">,</span></span>
<span class="line"><span style="color:#F07178;">pwd</span><span style="color:#89DDFF;">:</span><span style="color:#89DDFF;">&#39;</span><span style="color:#C3E88D;">123456</span><span style="color:#89DDFF;">&#39;</span><span style="color:#89DDFF;">,</span><span style="color:#A6ACCD;"> </span><span style="color:#F07178;">roles</span><span style="color:#89DDFF;">:</span><span style="color:#A6ACCD;">[</span><span style="color:#89DDFF;">{</span><span style="color:#F07178;">role</span><span style="color:#89DDFF;">:</span><span style="color:#89DDFF;">&#39;</span><span style="color:#C3E88D;">root</span><span style="color:#89DDFF;">&#39;</span><span style="color:#89DDFF;">,</span><span style="color:#F07178;">db</span><span style="color:#89DDFF;">:</span><span style="color:#89DDFF;">&#39;</span><span style="color:#C3E88D;">admin</span><span style="color:#89DDFF;">&#39;</span><span style="color:#89DDFF;">}</span><span style="color:#A6ACCD;">]</span></span>
<span class="line"><span style="color:#89DDFF;">}</span><span style="color:#A6ACCD;">)</span></span>
<span class="line"></span></code></pre></div><h2 id="\u7B2C\u4E8C\u6B65\u4FEE\u6539-mongodb-\u6570\u636E\u5E93\u914D\u7F6E\u6587\u4EF6" tabindex="-1">\u7B2C\u4E8C\u6B65\u4FEE\u6539 Mongodb \u6570\u636E\u5E93\u914D\u7F6E\u6587\u4EF6 <a class="header-anchor" href="#\u7B2C\u4E8C\u6B65\u4FEE\u6539-mongodb-\u6570\u636E\u5E93\u914D\u7F6E\u6587\u4EF6" aria-hidden="true">#</a></h2><div class="language-javascript"><span class="copy"></span><pre><code><span class="line"><span style="color:#A6ACCD;"># </span><span style="color:#FFCB6B;">\u8DEF\u5F84</span><span style="color:#89DDFF;">:</span><span style="color:#A6ACCD;"> </span><span style="color:#89DDFF;">~/</span><span style="color:#A6ACCD;">MongoDB\\Server\\</span><span style="color:#F78C6C;">4.0</span><span style="color:#A6ACCD;">\\bin\\mongod</span><span style="color:#89DDFF;">.</span><span style="color:#A6ACCD;">cfg </span><span style="color:#FFCB6B;">\u914D\u7F6E</span><span style="color:#89DDFF;">:</span></span>
<span class="line"><span style="color:#FFCB6B;">security</span><span style="color:#89DDFF;">:</span></span>
<span class="line"><span style="color:#A6ACCD;">			</span><span style="color:#FFCB6B;">authorization</span><span style="color:#89DDFF;">:</span><span style="color:#A6ACCD;"> enabled</span></span>
<span class="line"></span></code></pre></div><h2 id="\u7B2C\u4E09\u6B65\u91CD\u542F-mongodb-\u670D\u52A1" tabindex="-1">\u7B2C\u4E09\u6B65\u91CD\u542F mongodb \u670D\u52A1 <a class="header-anchor" href="#\u7B2C\u4E09\u6B65\u91CD\u542F-mongodb-\u670D\u52A1" aria-hidden="true">#</a></h2><p>...</p><h2 id="\u7B2C\u56DB\u6B65\u7528\u8D85\u7EA7\u7BA1\u7406\u5458\u8D26\u6237\u8FDE\u63A5\u6570\u636E\u5E93" tabindex="-1">\u7B2C\u56DB\u6B65\u7528\u8D85\u7EA7\u7BA1\u7406\u5458\u8D26\u6237\u8FDE\u63A5\u6570\u636E\u5E93 <a class="header-anchor" href="#\u7B2C\u56DB\u6B65\u7528\u8D85\u7EA7\u7BA1\u7406\u5458\u8D26\u6237\u8FDE\u63A5\u6570\u636E\u5E93" aria-hidden="true">#</a></h2><div class="language-javascript"><span class="copy"></span><pre><code><span class="line"><span style="color:#A6ACCD;">mongo admin </span><span style="color:#89DDFF;">-</span><span style="color:#A6ACCD;">u \u7528\u6237\u540D </span><span style="color:#89DDFF;">-</span><span style="color:#A6ACCD;">p \u5BC6\u7801</span></span>
<span class="line"><span style="color:#A6ACCD;">mongo </span><span style="color:#F78C6C;">192.168</span><span style="color:#89DDFF;">.</span><span style="color:#F78C6C;">1.200</span><span style="color:#A6ACCD;">:</span><span style="color:#F78C6C;">27017</span><span style="color:#89DDFF;">/</span><span style="color:#A6ACCD;">test </span><span style="color:#89DDFF;">-</span><span style="color:#A6ACCD;">u user </span><span style="color:#89DDFF;">-</span><span style="color:#A6ACCD;">p password</span></span>
<span class="line"></span></code></pre></div><h2 id="\u7B2C\u4E94\u6B65\u7ED9-eggcms-\u6570\u636E\u5E93\u521B\u5EFA\u4E00\u4E2A\u7528\u6237-\u53EA\u80FD\u8BBF\u95EE-eggcms-\u4E0D\u80FD\u8BBF\u95EE\u5176\u4ED6\u6570\u636E\u5E93" tabindex="-1">\u7B2C\u4E94\u6B65\u7ED9 eggcms \u6570\u636E\u5E93\u521B\u5EFA\u4E00\u4E2A\u7528\u6237 \u53EA\u80FD\u8BBF\u95EE eggcms \u4E0D\u80FD\u8BBF\u95EE\u5176\u4ED6\u6570\u636E\u5E93 <a class="header-anchor" href="#\u7B2C\u4E94\u6B65\u7ED9-eggcms-\u6570\u636E\u5E93\u521B\u5EFA\u4E00\u4E2A\u7528\u6237-\u53EA\u80FD\u8BBF\u95EE-eggcms-\u4E0D\u80FD\u8BBF\u95EE\u5176\u4ED6\u6570\u636E\u5E93" aria-hidden="true">#</a></h2><div class="language-javascript"><span class="copy"></span><pre><code><span class="line"><span style="color:#A6ACCD;">use eggcms</span></span>
<span class="line"><span style="color:#A6ACCD;">db</span><span style="color:#89DDFF;">.</span><span style="color:#82AAFF;">createUser</span><span style="color:#A6ACCD;">( </span><span style="color:#89DDFF;">{</span></span>
<span class="line"><span style="color:#F07178;">user</span><span style="color:#89DDFF;">:</span><span style="color:#A6ACCD;"> </span><span style="color:#89DDFF;">&quot;</span><span style="color:#C3E88D;">eggadmin</span><span style="color:#89DDFF;">&quot;</span><span style="color:#89DDFF;">,</span></span>
<span class="line"><span style="color:#F07178;">pwd</span><span style="color:#89DDFF;">:</span><span style="color:#A6ACCD;"> </span><span style="color:#89DDFF;">&quot;</span><span style="color:#C3E88D;">123456</span><span style="color:#89DDFF;">&quot;</span><span style="color:#89DDFF;">,</span></span>
<span class="line"><span style="color:#F07178;">roles</span><span style="color:#89DDFF;">:</span><span style="color:#A6ACCD;"> [ </span><span style="color:#89DDFF;">{</span><span style="color:#A6ACCD;"> </span><span style="color:#F07178;">role</span><span style="color:#89DDFF;">:</span><span style="color:#A6ACCD;"> </span><span style="color:#89DDFF;">&quot;</span><span style="color:#C3E88D;">dbOwner</span><span style="color:#89DDFF;">&quot;</span><span style="color:#89DDFF;">,</span><span style="color:#A6ACCD;"> </span><span style="color:#F07178;">db</span><span style="color:#89DDFF;">:</span><span style="color:#A6ACCD;"> </span><span style="color:#89DDFF;">&quot;</span><span style="color:#C3E88D;">eggcms</span><span style="color:#89DDFF;">&quot;</span><span style="color:#A6ACCD;"> </span><span style="color:#89DDFF;">}</span><span style="color:#A6ACCD;"> ]</span></span>
<span class="line"><span style="color:#89DDFF;">}</span><span style="color:#A6ACCD;"> )</span></span>
<span class="line"></span></code></pre></div><h2 id="mongodb-\u8D26\u6237\u6743\u9650\u914D\u7F6E\u4E2D\u5E38\u7528\u7684\u547D\u4EE4" tabindex="-1">Mongodb \u8D26\u6237\u6743\u9650\u914D\u7F6E\u4E2D\u5E38\u7528\u7684\u547D\u4EE4 <a class="header-anchor" href="#mongodb-\u8D26\u6237\u6743\u9650\u914D\u7F6E\u4E2D\u5E38\u7528\u7684\u547D\u4EE4" aria-hidden="true">#</a></h2><ul><li><p>show users; #\u67E5\u770B\u5F53\u524D\u5E93\u4E0B\u7684\u7528\u6237</p></li><li><p>db.dropUser(&quot;eggadmin&quot;) #\u5220\u9664\u7528\u6237</p></li><li><p>db.updateUser( &quot;admin&quot;,{pwd:&quot;password&quot;}); #\u4FEE\u6539\u7528\u6237\u5BC6\u7801</p></li><li><p>db.auth(&quot;admin&quot;,&quot;password&quot;); #\u5BC6\u7801\u8BA4\u8BC1</p></li></ul><h2 id="mongodb-\u6570\u636E\u5E93\u89D2\u8272" tabindex="-1">Mongodb \u6570\u636E\u5E93\u89D2\u8272 <a class="header-anchor" href="#mongodb-\u6570\u636E\u5E93\u89D2\u8272" aria-hidden="true">#</a></h2><p>1.\u6570\u636E\u5E93\u7528\u6237\u89D2\u8272:read\u3001readWrite;</p><p>2.\u6570\u636E\u5E93\u7BA1\u7406\u89D2\u8272:dbAdmin\u3001dbOwner\u3001userAdmin;</p><p>3.\u96C6\u7FA4\u7BA1\u7406\u89D2\u8272:clusterAdmin\u3001clusterManager\u3001clusterMonitor\u3001hostManager;</p><p>4.\u5907\u4EFD\u6062\u590D\u89D2\u8272:backup\u3001restore;</p><p>5.\u6240\u6709\u6570\u636E\u5E93\u89D2\u8272:readAnyDatabase\u3001readWriteAnyDatabase\u3001userAdminAnyDatabase\u3001 dbAdminAnyDatabase</p><p>6.\u8D85\u7EA7\u7528\u6237\u89D2\u8272:root</p><h2 id="\u8FDE\u63A5\u6570\u636E\u5E93\u7684\u65F6\u5019\u9700\u8981\u914D\u7F6E\u8D26\u6237\u5BC6\u7801" tabindex="-1">\u8FDE\u63A5\u6570\u636E\u5E93\u7684\u65F6\u5019\u9700\u8981\u914D\u7F6E\u8D26\u6237\u5BC6\u7801 <a class="header-anchor" href="#\u8FDE\u63A5\u6570\u636E\u5E93\u7684\u65F6\u5019\u9700\u8981\u914D\u7F6E\u8D26\u6237\u5BC6\u7801" aria-hidden="true">#</a></h2><p>const url = &#39;mongodb://admin:123456@localhost:27017/&#39;;</p><h2 id="mongodb-\u805A\u5408\u7BA1\u9053" tabindex="-1">MongoDB \u805A\u5408\u7BA1\u9053 <a class="header-anchor" href="#mongodb-\u805A\u5408\u7BA1\u9053" aria-hidden="true">#</a></h2><p>\u4F7F\u7528\u805A\u5408\u7BA1\u9053\u53EF\u4EE5\u5BF9\u96C6\u5408\u4E2D\u7684\u6587\u6863\u8FDB\u884C\u53D8\u6362\u548C\u7EC4\u5408\u3002\u8868\u5173\u8054\u67E5\u8BE2\u3001\u6570\u636E\u7684\u7EDF\u8BA1\u3002</p><p><img src="https://cdn.nlark.com/yuque/0/2021/png/2479971/1624783966849-d19c6a3a-2e9f-434f-8174-7d61db6547d3.png" alt="img"></p><h2 id="mongodb-aggregation-\u7BA1\u9053\u64CD\u4F5C\u7B26\u4E0E\u8868\u8FBE\u5F0F" tabindex="-1">MongoDB Aggregation \u7BA1\u9053\u64CD\u4F5C\u7B26\u4E0E\u8868\u8FBE\u5F0F <a class="header-anchor" href="#mongodb-aggregation-\u7BA1\u9053\u64CD\u4F5C\u7B26\u4E0E\u8868\u8FBE\u5F0F" aria-hidden="true">#</a></h2><table><thead><tr><th>\u7BA1\u9053\u64CD\u4F5C</th><th>Description</th></tr></thead><tbody><tr><td>$project</td><td>\u589E\u52A0\u3001\u5220\u9664\u3001\u91CD\u547D\u540D\u5B57\u6BB5</td></tr><tr><td>$match</td><td>\u6761\u4EF6\u5339\u914D\u3002\u53EA\u6EE1\u8DB3\u6761\u4EF6\u7684\u6587\u6863\u624D\u80FD\u8FDB\u5165\u4E0B \u4E00\u9636\u6BB5</td></tr><tr><td>$limit</td><td>\u9650\u5236\u7ED3\u679C\u7684\u6570\u91CF</td></tr><tr><td>$skip</td><td>\u8DF3\u8FC7\u6587\u6863\u7684\u6570\u91CF</td></tr><tr><td>$sort</td><td>\u6761\u4EF6\u6392\u5E8F\u3002</td></tr><tr><td>$group</td><td>\u6761\u4EF6\u7EC4\u5408\u7ED3\u679C \u7EDF\u8BA1</td></tr><tr><td>$lookup</td><td>\u7528\u4EE5\u5F15\u5165\u5176\u5B83\u96C6\u5408\u7684\u6570 $lookup \u636E(\u8868\u5173\u8054\u67E5\u8BE2)</td></tr></tbody></table><h2 id="\u7BA1\u9053\u8868\u8FBE\u5F0F" tabindex="-1">\u7BA1\u9053\u8868\u8FBE\u5F0F: <a class="header-anchor" href="#\u7BA1\u9053\u8868\u8FBE\u5F0F" aria-hidden="true">#</a></h2><p>\u7BA1\u9053\u64CD\u4F5C\u7B26\u4F5C\u4E3A\u201C\u952E\u201D,\u6240\u5BF9\u5E94\u7684\u201C\u503C\u201D\u53EB\u505A\u7BA1\u9053\u8868\u8FBE\u5F0F\u3002</p><p>\u4F8B\u5982{$match:{status:&quot;A&quot;}}\uFF0C$match \u79F0\u4E3A\u7BA1\u9053\u64CD\u4F5C\u7B26\uFF0C\u800C status:&quot;A&quot;\u79F0\u4E3A\u7BA1\u9053\u8868\u8FBE\u5F0F\uFF0C \u662F\u7BA1\u9053\u64CD\u4F5C\u7B26\u7684\u64CD\u4F5C\u6570(Operand)\u3002</p><table><thead><tr><th>\u5E38\u7528\u8868\u8FBE\u5F0F\u64CD\u4F5C\u7B26</th><th>Description</th></tr></thead><tbody><tr><td>$addToSet</td><td>\u5C06\u6587\u6863\u6307\u5B9A\u5B57\u6BB5\u7684\u503C\u53BB\u91CD</td></tr><tr><td>$max</td><td>\u6587\u6863\u6307\u5B9A\u5B57\u6BB5\u7684\u6700\u5927\u503C</td></tr><tr><td>$min</td><td>\u6587\u6863\u6307\u5B9A\u5B57\u6BB5\u7684\u6700\u5C0F\u503C</td></tr><tr><td>$sum</td><td>\u6587\u6863\u6307\u5B9A\u5B57\u6BB5\u6C42\u548C</td></tr><tr><td>$avg</td><td>\u6587\u6863\u6307\u5B9A\u5B57\u6BB5\u6C42\u5E73\u5747</td></tr><tr><td>$gt</td><td>\u5927\u4E8E\u7ED9\u5B9A\u503C</td></tr><tr><td>$lt</td><td>\u5C0F\u4E8E\u7ED9\u5B9A\u503C</td></tr><tr><td>$eq</td><td>\u7B49\u4E8E\u7ED9\u5B9A\u503C</td></tr></tbody></table><h2 id="\u6570\u636E\u6A21\u62DF" tabindex="-1">\u6570\u636E\u6A21\u62DF <a class="header-anchor" href="#\u6570\u636E\u6A21\u62DF" aria-hidden="true">#</a></h2><div class="language-javascript"><span class="copy"></span><pre><code><span class="line"><span style="color:#A6ACCD;">db</span><span style="color:#89DDFF;">.</span><span style="color:#A6ACCD;">order</span><span style="color:#89DDFF;">.</span><span style="color:#82AAFF;">insert</span><span style="color:#A6ACCD;">(</span><span style="color:#89DDFF;">{</span><span style="color:#89DDFF;">&quot;</span><span style="color:#F07178;">order_id</span><span style="color:#89DDFF;">&quot;</span><span style="color:#89DDFF;">:</span><span style="color:#89DDFF;">&quot;</span><span style="color:#C3E88D;">1</span><span style="color:#89DDFF;">&quot;</span><span style="color:#89DDFF;">,</span><span style="color:#89DDFF;">&quot;</span><span style="color:#F07178;">uid</span><span style="color:#89DDFF;">&quot;</span><span style="color:#89DDFF;">:</span><span style="color:#F78C6C;">10</span><span style="color:#89DDFF;">,</span><span style="color:#89DDFF;">&quot;</span><span style="color:#F07178;">trade_no</span><span style="color:#89DDFF;">&quot;</span><span style="color:#89DDFF;">:</span><span style="color:#89DDFF;">&quot;</span><span style="color:#C3E88D;">111</span><span style="color:#89DDFF;">&quot;</span><span style="color:#89DDFF;">,</span><span style="color:#89DDFF;">&quot;</span><span style="color:#F07178;">all_price</span><span style="color:#89DDFF;">&quot;</span><span style="color:#89DDFF;">:</span><span style="color:#F78C6C;">100</span><span style="color:#89DDFF;">,</span><span style="color:#89DDFF;">&quot;</span><span style="color:#F07178;">all_num</span><span style="color:#89DDFF;">&quot;</span><span style="color:#89DDFF;">:</span><span style="color:#F78C6C;">2</span><span style="color:#89DDFF;">}</span><span style="color:#A6ACCD;">) db</span><span style="color:#89DDFF;">.</span><span style="color:#A6ACCD;">order</span><span style="color:#89DDFF;">.</span><span style="color:#82AAFF;">insert</span><span style="color:#A6ACCD;">(</span><span style="color:#89DDFF;">{</span><span style="color:#89DDFF;">&quot;</span><span style="color:#F07178;">order_id</span><span style="color:#89DDFF;">&quot;</span><span style="color:#89DDFF;">:</span><span style="color:#89DDFF;">&quot;</span><span style="color:#C3E88D;">2</span><span style="color:#89DDFF;">&quot;</span><span style="color:#89DDFF;">,</span><span style="color:#89DDFF;">&quot;</span><span style="color:#F07178;">uid</span><span style="color:#89DDFF;">&quot;</span><span style="color:#89DDFF;">:</span><span style="color:#F78C6C;">7</span><span style="color:#89DDFF;">,</span><span style="color:#89DDFF;">&quot;</span><span style="color:#F07178;">trade_no</span><span style="color:#89DDFF;">&quot;</span><span style="color:#89DDFF;">:</span><span style="color:#89DDFF;">&quot;</span><span style="color:#C3E88D;">222</span><span style="color:#89DDFF;">&quot;</span><span style="color:#89DDFF;">,</span><span style="color:#89DDFF;">&quot;</span><span style="color:#F07178;">all_price</span><span style="color:#89DDFF;">&quot;</span><span style="color:#89DDFF;">:</span><span style="color:#F78C6C;">90</span><span style="color:#89DDFF;">,</span><span style="color:#89DDFF;">&quot;</span><span style="color:#F07178;">all_num</span><span style="color:#89DDFF;">&quot;</span><span style="color:#89DDFF;">:</span><span style="color:#F78C6C;">2</span><span style="color:#89DDFF;">}</span><span style="color:#A6ACCD;">) db</span><span style="color:#89DDFF;">.</span><span style="color:#A6ACCD;">order</span><span style="color:#89DDFF;">.</span><span style="color:#82AAFF;">insert</span><span style="color:#A6ACCD;">(</span><span style="color:#89DDFF;">{</span><span style="color:#89DDFF;">&quot;</span><span style="color:#F07178;">order_id</span><span style="color:#89DDFF;">&quot;</span><span style="color:#89DDFF;">:</span><span style="color:#89DDFF;">&quot;</span><span style="color:#C3E88D;">3</span><span style="color:#89DDFF;">&quot;</span><span style="color:#89DDFF;">,</span><span style="color:#89DDFF;">&quot;</span><span style="color:#F07178;">uid</span><span style="color:#89DDFF;">&quot;</span><span style="color:#89DDFF;">:</span><span style="color:#F78C6C;">9</span><span style="color:#89DDFF;">,</span><span style="color:#89DDFF;">&quot;</span><span style="color:#F07178;">trade_no</span><span style="color:#89DDFF;">&quot;</span><span style="color:#89DDFF;">:</span><span style="color:#89DDFF;">&quot;</span><span style="color:#C3E88D;">333</span><span style="color:#89DDFF;">&quot;</span><span style="color:#89DDFF;">,</span><span style="color:#89DDFF;">&quot;</span><span style="color:#F07178;">all_price</span><span style="color:#89DDFF;">&quot;</span><span style="color:#89DDFF;">:</span><span style="color:#F78C6C;">20</span><span style="color:#89DDFF;">,</span><span style="color:#89DDFF;">&quot;</span><span style="color:#F07178;">all_num</span><span style="color:#89DDFF;">&quot;</span><span style="color:#89DDFF;">:</span><span style="color:#F78C6C;">6</span><span style="color:#89DDFF;">}</span><span style="color:#A6ACCD;">)</span></span>
<span class="line"><span style="color:#A6ACCD;">db</span><span style="color:#89DDFF;">.</span><span style="color:#A6ACCD;">order_item</span><span style="color:#89DDFF;">.</span><span style="color:#82AAFF;">insert</span><span style="color:#A6ACCD;">(</span><span style="color:#89DDFF;">{</span><span style="color:#89DDFF;">&quot;</span><span style="color:#F07178;">order_id</span><span style="color:#89DDFF;">&quot;</span><span style="color:#89DDFF;">:</span><span style="color:#89DDFF;">&quot;</span><span style="color:#C3E88D;">1</span><span style="color:#89DDFF;">&quot;</span><span style="color:#89DDFF;">,</span><span style="color:#89DDFF;">&quot;</span><span style="color:#F07178;">title</span><span style="color:#89DDFF;">&quot;</span><span style="color:#89DDFF;">:</span><span style="color:#89DDFF;">&quot;</span><span style="color:#C3E88D;">\u5546\u54C1\u9F20\u6807 1</span><span style="color:#89DDFF;">&quot;</span><span style="color:#89DDFF;">,</span><span style="color:#89DDFF;">&quot;</span><span style="color:#F07178;">price</span><span style="color:#89DDFF;">&quot;</span><span style="color:#89DDFF;">:</span><span style="color:#F78C6C;">50</span><span style="color:#89DDFF;">,</span><span style="color:#F07178;">num</span><span style="color:#89DDFF;">:</span><span style="color:#F78C6C;">1</span><span style="color:#89DDFF;">}</span><span style="color:#A6ACCD;">) db</span><span style="color:#89DDFF;">.</span><span style="color:#A6ACCD;">order_item</span><span style="color:#89DDFF;">.</span><span style="color:#82AAFF;">insert</span><span style="color:#A6ACCD;">(</span><span style="color:#89DDFF;">{</span><span style="color:#89DDFF;">&quot;</span><span style="color:#F07178;">order_id</span><span style="color:#89DDFF;">&quot;</span><span style="color:#89DDFF;">:</span><span style="color:#89DDFF;">&quot;</span><span style="color:#C3E88D;">1</span><span style="color:#89DDFF;">&quot;</span><span style="color:#89DDFF;">,</span><span style="color:#89DDFF;">&quot;</span><span style="color:#F07178;">title</span><span style="color:#89DDFF;">&quot;</span><span style="color:#89DDFF;">:</span><span style="color:#89DDFF;">&quot;</span><span style="color:#C3E88D;">\u5546\u54C1\u952E\u76D8 2</span><span style="color:#89DDFF;">&quot;</span><span style="color:#89DDFF;">,</span><span style="color:#89DDFF;">&quot;</span><span style="color:#F07178;">price</span><span style="color:#89DDFF;">&quot;</span><span style="color:#89DDFF;">:</span><span style="color:#F78C6C;">50</span><span style="color:#89DDFF;">,</span><span style="color:#F07178;">num</span><span style="color:#89DDFF;">:</span><span style="color:#F78C6C;">1</span><span style="color:#89DDFF;">}</span><span style="color:#A6ACCD;">) db</span><span style="color:#89DDFF;">.</span><span style="color:#A6ACCD;">order_item</span><span style="color:#89DDFF;">.</span><span style="color:#82AAFF;">insert</span><span style="color:#A6ACCD;">(</span><span style="color:#89DDFF;">{</span><span style="color:#89DDFF;">&quot;</span><span style="color:#F07178;">order_id</span><span style="color:#89DDFF;">&quot;</span><span style="color:#89DDFF;">:</span><span style="color:#89DDFF;">&quot;</span><span style="color:#C3E88D;">1</span><span style="color:#89DDFF;">&quot;</span><span style="color:#89DDFF;">,</span><span style="color:#89DDFF;">&quot;</span><span style="color:#F07178;">title</span><span style="color:#89DDFF;">&quot;</span><span style="color:#89DDFF;">:</span><span style="color:#89DDFF;">&quot;</span><span style="color:#C3E88D;">\u5546\u54C1\u952E\u76D8 3</span><span style="color:#89DDFF;">&quot;</span><span style="color:#89DDFF;">,</span><span style="color:#89DDFF;">&quot;</span><span style="color:#F07178;">price</span><span style="color:#89DDFF;">&quot;</span><span style="color:#89DDFF;">:</span><span style="color:#F78C6C;">0</span><span style="color:#89DDFF;">,</span><span style="color:#F07178;">num</span><span style="color:#89DDFF;">:</span><span style="color:#F78C6C;">1</span><span style="color:#89DDFF;">}</span><span style="color:#A6ACCD;">)</span></span>
<span class="line"><span style="color:#A6ACCD;">db</span><span style="color:#89DDFF;">.</span><span style="color:#A6ACCD;">order_item</span><span style="color:#89DDFF;">.</span><span style="color:#82AAFF;">insert</span><span style="color:#A6ACCD;">(</span><span style="color:#89DDFF;">{</span><span style="color:#89DDFF;">&quot;</span><span style="color:#F07178;">order_id</span><span style="color:#89DDFF;">&quot;</span><span style="color:#89DDFF;">:</span><span style="color:#89DDFF;">&quot;</span><span style="color:#C3E88D;">2</span><span style="color:#89DDFF;">&quot;</span><span style="color:#89DDFF;">,</span><span style="color:#89DDFF;">&quot;</span><span style="color:#F07178;">title</span><span style="color:#89DDFF;">&quot;</span><span style="color:#89DDFF;">:</span><span style="color:#89DDFF;">&quot;</span><span style="color:#C3E88D;">\u725B\u5976</span><span style="color:#89DDFF;">&quot;</span><span style="color:#89DDFF;">,</span><span style="color:#89DDFF;">&quot;</span><span style="color:#F07178;">price</span><span style="color:#89DDFF;">&quot;</span><span style="color:#89DDFF;">:</span><span style="color:#F78C6C;">50</span><span style="color:#89DDFF;">,</span><span style="color:#F07178;">num</span><span style="color:#89DDFF;">:</span><span style="color:#F78C6C;">1</span><span style="color:#89DDFF;">}</span><span style="color:#A6ACCD;">) db</span><span style="color:#89DDFF;">.</span><span style="color:#A6ACCD;">order_item</span><span style="color:#89DDFF;">.</span><span style="color:#82AAFF;">insert</span><span style="color:#A6ACCD;">(</span><span style="color:#89DDFF;">{</span><span style="color:#89DDFF;">&quot;</span><span style="color:#F07178;">order_id</span><span style="color:#89DDFF;">&quot;</span><span style="color:#89DDFF;">:</span><span style="color:#89DDFF;">&quot;</span><span style="color:#C3E88D;">2</span><span style="color:#89DDFF;">&quot;</span><span style="color:#89DDFF;">,</span><span style="color:#89DDFF;">&quot;</span><span style="color:#F07178;">title</span><span style="color:#89DDFF;">&quot;</span><span style="color:#89DDFF;">:</span><span style="color:#89DDFF;">&quot;</span><span style="color:#C3E88D;">\u9178\u5976</span><span style="color:#89DDFF;">&quot;</span><span style="color:#89DDFF;">,</span><span style="color:#89DDFF;">&quot;</span><span style="color:#F07178;">price</span><span style="color:#89DDFF;">&quot;</span><span style="color:#89DDFF;">:</span><span style="color:#F78C6C;">40</span><span style="color:#89DDFF;">,</span><span style="color:#F07178;">num</span><span style="color:#89DDFF;">:</span><span style="color:#F78C6C;">1</span><span style="color:#89DDFF;">}</span><span style="color:#A6ACCD;">)</span></span>
<span class="line"><span style="color:#A6ACCD;">db</span><span style="color:#89DDFF;">.</span><span style="color:#A6ACCD;">order_item</span><span style="color:#89DDFF;">.</span><span style="color:#82AAFF;">insert</span><span style="color:#A6ACCD;">(</span><span style="color:#89DDFF;">{</span><span style="color:#89DDFF;">&quot;</span><span style="color:#F07178;">order_id</span><span style="color:#89DDFF;">&quot;</span><span style="color:#89DDFF;">:</span><span style="color:#89DDFF;">&quot;</span><span style="color:#C3E88D;">3</span><span style="color:#89DDFF;">&quot;</span><span style="color:#89DDFF;">,</span><span style="color:#89DDFF;">&quot;</span><span style="color:#F07178;">title</span><span style="color:#89DDFF;">&quot;</span><span style="color:#89DDFF;">:</span><span style="color:#89DDFF;">&quot;</span><span style="color:#C3E88D;">\u77FF\u6CC9\u6C34</span><span style="color:#89DDFF;">&quot;</span><span style="color:#89DDFF;">,</span><span style="color:#89DDFF;">&quot;</span><span style="color:#F07178;">price</span><span style="color:#89DDFF;">&quot;</span><span style="color:#89DDFF;">:</span><span style="color:#F78C6C;">2</span><span style="color:#89DDFF;">,</span><span style="color:#F07178;">num</span><span style="color:#89DDFF;">:</span><span style="color:#F78C6C;">5</span><span style="color:#89DDFF;">}</span><span style="color:#A6ACCD;">) db</span><span style="color:#89DDFF;">.</span><span style="color:#A6ACCD;">order_item</span><span style="color:#89DDFF;">.</span><span style="color:#82AAFF;">insert</span><span style="color:#A6ACCD;">(</span><span style="color:#89DDFF;">{</span><span style="color:#89DDFF;">&quot;</span><span style="color:#F07178;">order_id</span><span style="color:#89DDFF;">&quot;</span><span style="color:#89DDFF;">:</span><span style="color:#89DDFF;">&quot;</span><span style="color:#C3E88D;">3</span><span style="color:#89DDFF;">&quot;</span><span style="color:#89DDFF;">,</span><span style="color:#89DDFF;">&quot;</span><span style="color:#F07178;">title</span><span style="color:#89DDFF;">&quot;</span><span style="color:#89DDFF;">:</span><span style="color:#89DDFF;">&quot;</span><span style="color:#C3E88D;">\u6BDB\u5DFE</span><span style="color:#89DDFF;">&quot;</span><span style="color:#89DDFF;">,</span><span style="color:#89DDFF;">&quot;</span><span style="color:#F07178;">price</span><span style="color:#89DDFF;">&quot;</span><span style="color:#89DDFF;">:</span><span style="color:#F78C6C;">10</span><span style="color:#89DDFF;">,</span><span style="color:#F07178;">num</span><span style="color:#89DDFF;">:</span><span style="color:#F78C6C;">1</span><span style="color:#89DDFF;">}</span><span style="color:#A6ACCD;">)</span></span>
<span class="line"></span></code></pre></div><ul><li>$project</li></ul><p>\u4FEE\u6539\u6587\u6863\u7684\u7ED3\u6784\uFF0C\u53EF\u4EE5\u7528\u6765\u91CD\u547D\u540D\u3001\u589E\u52A0\u6216\u5220\u9664\u6587\u6863\u4E2D\u7684\u5B57\u6BB5\u3002</p><p>\u8981\u6C42\u67E5\u627E order \u53EA\u8FD4\u56DE\u6587\u6863\u4E2D trade_no \u548C all_price \u5B57\u6BB5</p><div class="language-javascript"><span class="copy"></span><pre><code><span class="line"><span style="color:#A6ACCD;">db</span><span style="color:#89DDFF;">.</span><span style="color:#A6ACCD;">order</span><span style="color:#89DDFF;">.</span><span style="color:#82AAFF;">aggregate</span><span style="color:#A6ACCD;">([ </span><span style="color:#89DDFF;">{</span></span>
<span class="line"><span style="color:#F07178;">$project</span><span style="color:#89DDFF;">:{</span><span style="color:#A6ACCD;"> </span><span style="color:#F07178;">trade_no</span><span style="color:#89DDFF;">:</span><span style="color:#F78C6C;">1</span><span style="color:#89DDFF;">,</span><span style="color:#A6ACCD;"> </span><span style="color:#F07178;">all_price</span><span style="color:#89DDFF;">:</span><span style="color:#F78C6C;">1</span><span style="color:#A6ACCD;"> </span><span style="color:#89DDFF;">}</span><span style="color:#A6ACCD;"> </span><span style="color:#89DDFF;">}</span></span>
<span class="line"><span style="color:#A6ACCD;">])</span></span>
<span class="line"></span></code></pre></div><ul><li>match</li></ul><p>\u7528\u4E8E\u8FC7\u6EE4\u6587\u6863\u3002\u7528\u6CD5\u7C7B\u4F3C\u4E8E find() \u65B9\u6CD5\u4E2D\u7684\u53C2\u6570\u3002</p><div class="language-javascript"><span class="copy"></span><pre><code><span class="line"><span style="color:#A6ACCD;">db</span><span style="color:#89DDFF;">.</span><span style="color:#A6ACCD;">order</span><span style="color:#89DDFF;">.</span><span style="color:#82AAFF;">aggregate</span><span style="color:#A6ACCD;">([ </span><span style="color:#89DDFF;">{</span></span>
<span class="line"><span style="color:#F07178;">$project</span><span style="color:#89DDFF;">:{</span><span style="color:#A6ACCD;"> </span><span style="color:#F07178;">trade_no</span><span style="color:#89DDFF;">:</span><span style="color:#F78C6C;">1</span><span style="color:#89DDFF;">,</span><span style="color:#A6ACCD;"> </span><span style="color:#F07178;">all_price</span><span style="color:#89DDFF;">:</span><span style="color:#F78C6C;">1</span><span style="color:#A6ACCD;"> </span><span style="color:#89DDFF;">}</span><span style="color:#A6ACCD;"> </span><span style="color:#89DDFF;">},</span></span>
<span class="line"><span style="color:#89DDFF;">{</span></span>
<span class="line"><span style="color:#F07178;">$match</span><span style="color:#89DDFF;">:{</span><span style="color:#89DDFF;">&quot;</span><span style="color:#F07178;">all_price</span><span style="color:#89DDFF;">&quot;</span><span style="color:#89DDFF;">:{</span><span style="color:#F07178;">$gte</span><span style="color:#89DDFF;">:</span><span style="color:#F78C6C;">90</span><span style="color:#89DDFF;">}}</span></span>
<span class="line"><span style="color:#89DDFF;">}</span><span style="color:#A6ACCD;"> ])</span></span>
<span class="line"></span></code></pre></div><ul><li>$group</li></ul><p>\u5C06\u96C6\u5408\u4E2D\u7684\u6587\u6863\u8FDB\u884C\u5206\u7EC4\uFF0C\u53EF\u7528\u4E8E\u7EDF\u8BA1\u7ED3\u679C\u3002</p><p>\u7EDF\u8BA1\u6BCF\u4E2A\u8BA2\u5355\u7684\u8BA2\u5355\u6570\u91CF\uFF0C\u6309\u7167\u8BA2\u5355\u53F7\u5206\u7EC4</p><div class="language-javascript"><span class="copy"></span><pre><code><span class="line"><span style="color:#A6ACCD;">db</span><span style="color:#89DDFF;">.</span><span style="color:#A6ACCD;">order_item</span><span style="color:#89DDFF;">.</span><span style="color:#82AAFF;">aggregate</span><span style="color:#A6ACCD;">( [</span></span>
<span class="line"><span style="color:#89DDFF;">{</span></span>
<span class="line"><span style="color:#F07178;">$group</span><span style="color:#89DDFF;">:</span><span style="color:#A6ACCD;"> </span><span style="color:#89DDFF;">{</span><span style="color:#F07178;">_id</span><span style="color:#89DDFF;">:</span><span style="color:#A6ACCD;"> </span><span style="color:#89DDFF;">&quot;</span><span style="color:#C3E88D;">$order_id</span><span style="color:#89DDFF;">&quot;</span><span style="color:#89DDFF;">,</span><span style="color:#A6ACCD;"> </span><span style="color:#F07178;">total</span><span style="color:#89DDFF;">:</span><span style="color:#A6ACCD;"> </span><span style="color:#89DDFF;">{</span><span style="color:#F07178;">$sum</span><span style="color:#89DDFF;">:</span><span style="color:#A6ACCD;"> </span><span style="color:#89DDFF;">&quot;</span><span style="color:#C3E88D;">$num</span><span style="color:#89DDFF;">&quot;</span><span style="color:#89DDFF;">}}</span></span>
<span class="line"><span style="color:#89DDFF;">}</span><span style="color:#A6ACCD;"> ]</span></span>
<span class="line"><span style="color:#A6ACCD;">)</span></span>
<span class="line"></span></code></pre></div><ul><li>$sort</li></ul><p>\u5C06\u96C6\u5408\u4E2D\u7684\u6587\u6863\u8FDB\u884C\u6392\u5E8F\u3002</p><div class="language-javascript"><span class="copy"></span><pre><code><span class="line"><span style="color:#A6ACCD;">db</span><span style="color:#89DDFF;">.</span><span style="color:#A6ACCD;">order</span><span style="color:#89DDFF;">.</span><span style="color:#82AAFF;">aggregate</span><span style="color:#A6ACCD;">([ </span><span style="color:#89DDFF;">{</span></span>
<span class="line"><span style="color:#F07178;">$project</span><span style="color:#89DDFF;">:{</span><span style="color:#A6ACCD;"> </span><span style="color:#F07178;">trade_no</span><span style="color:#89DDFF;">:</span><span style="color:#F78C6C;">1</span><span style="color:#89DDFF;">,</span><span style="color:#A6ACCD;"> </span><span style="color:#F07178;">all_price</span><span style="color:#89DDFF;">:</span><span style="color:#F78C6C;">1</span><span style="color:#A6ACCD;"> </span><span style="color:#89DDFF;">}</span><span style="color:#A6ACCD;"> </span><span style="color:#89DDFF;">},</span></span>
<span class="line"><span style="color:#89DDFF;">{</span></span>
<span class="line"><span style="color:#F07178;">$match</span><span style="color:#89DDFF;">:{</span><span style="color:#89DDFF;">&quot;</span><span style="color:#F07178;">all_price</span><span style="color:#89DDFF;">&quot;</span><span style="color:#89DDFF;">:{</span><span style="color:#F07178;">$gte</span><span style="color:#89DDFF;">:</span><span style="color:#F78C6C;">90</span><span style="color:#89DDFF;">}}</span></span>
<span class="line"><span style="color:#89DDFF;">},</span><span style="color:#A6ACCD;"> </span><span style="color:#89DDFF;">{</span></span>
<span class="line"><span style="color:#F07178;">$sort</span><span style="color:#89DDFF;">:{</span><span style="color:#89DDFF;">&quot;</span><span style="color:#F07178;">all_price</span><span style="color:#89DDFF;">&quot;</span><span style="color:#89DDFF;">:-</span><span style="color:#F78C6C;">1</span><span style="color:#89DDFF;">}</span><span style="color:#A6ACCD;"> </span><span style="color:#89DDFF;">}</span></span>
<span class="line"><span style="color:#A6ACCD;">])</span></span>
<span class="line"></span></code></pre></div><ul><li>$limit</li></ul><div class="language-javascript"><span class="copy"></span><pre><code><span class="line"><span style="color:#A6ACCD;">db</span><span style="color:#89DDFF;">.</span><span style="color:#A6ACCD;">order</span><span style="color:#89DDFF;">.</span><span style="color:#82AAFF;">aggregate</span><span style="color:#A6ACCD;">([ </span><span style="color:#89DDFF;">{</span></span>
<span class="line"><span style="color:#F07178;">$project</span><span style="color:#89DDFF;">:{</span><span style="color:#A6ACCD;"> </span><span style="color:#F07178;">trade_no</span><span style="color:#89DDFF;">:</span><span style="color:#F78C6C;">1</span><span style="color:#89DDFF;">,</span><span style="color:#A6ACCD;"> </span><span style="color:#F07178;">all_price</span><span style="color:#89DDFF;">:</span><span style="color:#F78C6C;">1</span><span style="color:#A6ACCD;"> </span><span style="color:#89DDFF;">}</span><span style="color:#A6ACCD;"> </span><span style="color:#89DDFF;">},</span></span>
<span class="line"><span style="color:#89DDFF;">{</span></span>
<span class="line"><span style="color:#F07178;">$match</span><span style="color:#89DDFF;">:{</span><span style="color:#89DDFF;">&quot;</span><span style="color:#F07178;">all_price</span><span style="color:#89DDFF;">&quot;</span><span style="color:#89DDFF;">:{</span><span style="color:#F07178;">$gte</span><span style="color:#89DDFF;">:</span><span style="color:#F78C6C;">90</span><span style="color:#89DDFF;">}}</span></span>
<span class="line"><span style="color:#89DDFF;">},</span><span style="color:#A6ACCD;"> </span><span style="color:#89DDFF;">{</span></span>
<span class="line"><span style="color:#F07178;">$sort</span><span style="color:#89DDFF;">:{</span><span style="color:#89DDFF;">&quot;</span><span style="color:#F07178;">all_price</span><span style="color:#89DDFF;">&quot;</span><span style="color:#89DDFF;">:-</span><span style="color:#F78C6C;">1</span><span style="color:#89DDFF;">}</span><span style="color:#A6ACCD;"> </span><span style="color:#89DDFF;">},</span></span>
<span class="line"><span style="color:#89DDFF;">{</span></span>
<span class="line"><span style="color:#F07178;">$limit</span><span style="color:#89DDFF;">:</span><span style="color:#F78C6C;">1</span></span>
<span class="line"><span style="color:#89DDFF;">}</span><span style="color:#A6ACCD;"> ])</span></span>
<span class="line"></span></code></pre></div><ul><li>$skip</li></ul><div class="language-javascript"><span class="copy"></span><pre><code><span class="line"><span style="color:#A6ACCD;">db</span><span style="color:#89DDFF;">.</span><span style="color:#A6ACCD;">order</span><span style="color:#89DDFF;">.</span><span style="color:#82AAFF;">aggregate</span><span style="color:#A6ACCD;">([ </span></span>
<span class="line"><span style="color:#89DDFF;">{</span><span style="color:#F07178;">$project</span><span style="color:#89DDFF;">:{</span><span style="color:#A6ACCD;"> </span><span style="color:#F07178;">trade_no</span><span style="color:#89DDFF;">:</span><span style="color:#F78C6C;">1</span><span style="color:#89DDFF;">,</span><span style="color:#A6ACCD;"> </span><span style="color:#F07178;">all_price</span><span style="color:#89DDFF;">:</span><span style="color:#F78C6C;">1</span><span style="color:#A6ACCD;"> </span><span style="color:#89DDFF;">}</span><span style="color:#A6ACCD;"> </span><span style="color:#89DDFF;">},</span></span>
<span class="line"><span style="color:#89DDFF;">{</span><span style="color:#F07178;">$match</span><span style="color:#89DDFF;">:{</span><span style="color:#89DDFF;">&quot;</span><span style="color:#F07178;">all_price</span><span style="color:#89DDFF;">&quot;</span><span style="color:#89DDFF;">:{</span><span style="color:#F07178;">$gte</span><span style="color:#89DDFF;">:</span><span style="color:#F78C6C;">90</span><span style="color:#89DDFF;">}}},</span><span style="color:#A6ACCD;"> </span></span>
<span class="line"><span style="color:#89DDFF;">{</span><span style="color:#F07178;">$sort</span><span style="color:#89DDFF;">:{</span><span style="color:#89DDFF;">&quot;</span><span style="color:#F07178;">all_price</span><span style="color:#89DDFF;">&quot;</span><span style="color:#89DDFF;">:-</span><span style="color:#F78C6C;">1</span><span style="color:#89DDFF;">}</span><span style="color:#A6ACCD;"> </span><span style="color:#89DDFF;">},</span></span>
<span class="line"><span style="color:#89DDFF;">{</span><span style="color:#F07178;">$skip</span><span style="color:#89DDFF;">:</span><span style="color:#F78C6C;">1</span><span style="color:#89DDFF;">}</span><span style="color:#A6ACCD;">])</span></span>
<span class="line"></span></code></pre></div><ul><li>$lookup \u8868\u5173\u8054</li></ul><div class="language-javascript"><span class="copy"></span><pre><code><span class="line"><span style="color:#A6ACCD;">db</span><span style="color:#89DDFF;">.</span><span style="color:#A6ACCD;">order</span><span style="color:#89DDFF;">.</span><span style="color:#82AAFF;">aggregate</span><span style="color:#A6ACCD;">([ </span><span style="color:#89DDFF;">{</span></span>
<span class="line"><span style="color:#F07178;">$lookup</span><span style="color:#89DDFF;">:</span><span style="color:#A6ACCD;"> </span><span style="color:#89DDFF;">{</span></span>
<span class="line"><span style="color:#F07178;">from</span><span style="color:#89DDFF;">:</span><span style="color:#A6ACCD;"> </span><span style="color:#89DDFF;">&quot;</span><span style="color:#C3E88D;">order_item</span><span style="color:#89DDFF;">&quot;</span><span style="color:#89DDFF;">,</span></span>
<span class="line"><span style="color:#F07178;">localField</span><span style="color:#89DDFF;">:</span><span style="color:#A6ACCD;"> </span><span style="color:#89DDFF;">&quot;</span><span style="color:#C3E88D;">order_id</span><span style="color:#89DDFF;">&quot;</span><span style="color:#89DDFF;">,</span><span style="color:#A6ACCD;"> </span><span style="color:#F07178;">foreignField</span><span style="color:#89DDFF;">:</span><span style="color:#A6ACCD;"> </span><span style="color:#89DDFF;">&quot;</span><span style="color:#C3E88D;">order_id</span><span style="color:#89DDFF;">&quot;</span><span style="color:#89DDFF;">,</span><span style="color:#A6ACCD;"> </span><span style="color:#F07178;">as</span><span style="color:#89DDFF;">:</span><span style="color:#A6ACCD;"> </span><span style="color:#89DDFF;">&quot;</span><span style="color:#C3E88D;">items</span><span style="color:#89DDFF;">&quot;</span></span>
<span class="line"><span style="color:#89DDFF;">}</span><span style="color:#A6ACCD;"> </span><span style="color:#89DDFF;">}</span></span>
<span class="line"><span style="color:#A6ACCD;">])</span></span>
<span class="line"></span></code></pre></div>`,144),e=[p];function t(r,c,D,F,y,i){return n(),a("div",null,e)}var C=s(o,[["render",t]]);export{u as __pageData,C as default};
